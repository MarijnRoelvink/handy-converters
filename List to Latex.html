<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>List to latex</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/select2.css">
	<style>
        html, body{
            width: 100%;
            height: 100%;
        }

        body {
            display: flex;
            align-items: stretch;
	        flex-direction: column;
        }

        select {
	        margin: 5px 0;
        }
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="ONconverter.js"></script>
</head>
<body>
<div class="w-100 nav" id="topbar">
	<h1 class="mt-3 ml-5">Bullet converter</h1>
</div><div class="container mt-5">
	<div class="row">
		<div class="col-6">
			<div class="d-flex justify-content-between">
				<h4>Input:</h4>
				<button class="btn btn-primary" id="run">Run</button>
			</div>
			<div class="d-flex">
				<select class="custom-select" id="select-input-lang" onchange="">
					<option value="word">Microsoft</option>
					<option value="md">Markdown</option>
				</select>
			</div>
			<textarea id="input-list" class="form-control"  style="height: 400px">		1. How can we formalize the logic defined at country level and from different expertises to be reusable, flexible and machine readable?
			i. How can we use this logic to provide better data presentation?
		2. How can we improve our projections by using modelling to strengthen our assumptions?
			i. How can we compare different possible scenarios instead of looking at the "the most likely" one?
			ii. How we can monitor the validity of our projections by monitoring the assumptions/risk factors?
			iii. What can we learn from performing data analysis on previous analyses?
			</textarea>
<!--			<div contenteditable="true" id="id="input-list"" class="form-control" style="height: 400px"></div>-->
		</div>
		<div class="col-6">
			<h4 class="">Output:</h4>
			<div class="d-flex">
				<select class="custom-select" id="select-output-lang" onchange="">
					<option value="latex">Latex</option>
					<option value="md">Markdown</option>
				</select>
			</div>
			<textarea id="output" class="form-control" style="height: 400px"></textarea>
		</div>
	</div>
</div>
</body>
<script>
	$("#run").click(() => {
		let input = new ONInput($("#input-list").val());
		console.log(input.mf);
		input.mf.print();
	})

	// $("#input-list").change(() => {
	// 	let lines = $("#input-list").val().split("\n");
	// 	let items = [];
	// 	let matches = [];
	// 	let oldIndex = 0, index = 0;
	// 	let indent, oldIndent;
	// 	let res = ""
	// 	let re = RegExp(`(\\t*)[\\w\\d]{1,2}[.)][ \\t](.*)`);
	// 	// let re = RegExp(`(\\t+)[\\w\\d]{1,2}\\. (.*)`);
	// 	//let type = "itemize";
	// 	let type = "enumerate";
	// 	lines.forEach(l =>  {
	// 		let match = l.match(re);
	// 		console.log(match);
	// 		if(match) {
	// 			index = match[1].length + 1;
	// 			console.log(oldIndex, index)
	// 			indent = Array(index).join("\t");
	// 			oldIndent = Array(oldIndex).join("\t");
	// 			if(index > oldIndex){
	// 				res = res + indent + "\\begin{"+ type + "}\n"
	// 			}
	// 			if(index < oldIndex) {
	// 				res = res + oldIndent + "\\end{"+ type + "}\n"
	// 			}
	// 			res = res + indent + `\t\\item ${match[2]}\n`
	// 			oldIndex = index;
	// 		}
	// 	});
	// 	// res = res + oldIndent + "\\end{"+ type + "}\n"
	//
	// 	$("#output").val(`${res}\\end{${type}}`)
	//
	// 	// const re = /\t\t[\w\d]{1,2}\. (.*)/g;
	// 	// let matches = [...$("#input-list").val().matchAll(re)];
	// 	// console.log(matches)
	// 	// matches.forEach((match) => {
	// 	// 	console.log(match[1])
	// 	// })
	// 	// let items = matches.map(m => `\t\\item ${m[1]}`).join("\n")
	// 	// $("#output").val(`\\begin{enumerate}\n${items}\\end{enumerate}
	// 	// `)
	// })
</script>
</html>